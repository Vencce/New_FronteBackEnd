import{a as n}from"./index.a270d04d.js";import{A as y}from"./autores.d05a36ce.js";import{C as _}from"./categorias.261bbfe1.js";import{A as L}from"./editoras.5c315c38.js";import{_ as k,o as u,c as d,a as s,w as v,v as p,b as f,d as x,F as m,r as h,t as i}from"./index.cd9cced1.js";class T{async buscarTodosOsLivros(){return(await n.get("https://vitorematheuslivraria.herokuapp.com/livros")).data}async buscarLivros(a){return(await n.get(`https://vitorematheuslivraria.herokuapp.com/livros/${a}`)).data}async adicionarLivro(a){return(await n.post("https://vitorematheuslivraria.herokuapp.com/livros",a)).data}async excluirLivro(a){return(await n.delete(`https://vitorematheuslivraria.herokuapp.com/livros/${a}`)).data}async atualizarLivro(a){return(await n.put(`https://vitorematheuslivraria.herokuapp.com/livros/${a.id}`,a)).data}}const e=new T,w=new y,A=new _,b=new L,C={data(){return{livro:{},livros:[],categoria:{},categorias:[],editora:{},editoras:[],autor:{},autores:[]}},async created(){this.livros=await e.buscarTodosOsLivros(),this.autores=await w.buscarTodosOsAutores(),this.categorias=await A.buscarTodasAsCategorias(),this.editoras=await b.buscarTodasAsEditoras()},methods:{async salvar(){this.livro.id?await e.atualizarLivro(this.livro):await e.adicionarLivro(this.livro),this.livros=await e.buscarTodosOsLivros(),this.categorias=await A.buscarTodasAsCategorias(),this.editoras=await b.buscarTodasAsEditoras(),this.autores=await w.buscarTodosOsAutores(),this.livro={}},async excluir(l){await e.excluirLivro(l.id),this.livros=await e.buscarTodosOsLivros()},editar(l){Object.assign(this.livro,l)}}},O={class:"princ"},E={class:"container"},V=s("div",{class:"title"},[s("h2",null,"Gerenciamento de livros")],-1),N={class:"form-input"},U=["value"],B={class:"liv_list-items"},D=s("thead",{class:"liv_thead"},[s("tr",null,[s("td",null,"ID"),s("td",null,"Nome"),s("td",null,"Categoria"),s("td",null,"Autor"),s("td",null,"Editora"),s("td",null,"A\xE7\xF5es")])],-1),S=["onClick"],z=["onClick"];function F(l,a,c,K,o,r){return u(),d("main",O,[s("div",E,[V,s("div",N,[v(s("input",{class:"input-liv",type:"text","onUpdate:modelValue":a[0]||(a[0]=t=>o.livro.nome=t),placeholder:"Nome do Livro"},null,512),[[p,o.livro.nome]]),v(s("input",{class:"input-liv",type:"text","onUpdate:modelValue":a[1]||(a[1]=t=>o.livro.editora=t),placeholder:"Nome da Editora"},null,512),[[p,o.livro.editora]]),v(s("input",{class:"input-liv",type:"text","onUpdate:modelValue":a[2]||(a[2]=t=>o.livro.autor=t),placeholder:"Nome do(s) Autor(es)"},null,512),[[p,o.livro.autor]]),v(s("select",{class:"input-liv-cat","onUpdate:modelValue":a[3]||(a[3]=t=>o.livro.categoria=t),onKeyup:a[4]||(a[4]=x((...t)=>r.salvar&&r.salvar(...t),["enter"]))},[(u(!0),d(m,null,h(o.categorias,t=>(u(),d("option",{key:t.id,value:t.categoria},i(t.categoria),9,U))),128))],544),[[f,o.livro.categoria]]),s("button",{class:"but-salvar",onClick:a[5]||(a[5]=(...t)=>r.salvar&&r.salvar(...t))},"Salvar")])]),s("div",B,[s("table",null,[D,s("tbody",null,[(u(!0),d(m,null,h(o.livros,t=>(u(),d("tr",{key:t.id},[s("td",null,i(t.id),1),s("td",null,i(t.nome),1),s("td",null,i(t.categoria),1),s("td",null,i(t.autor),1),s("td",null,i(t.editora),1),s("td",null,[s("button",{class:"but-apagar",onClick:g=>r.excluir(t)},"Apagar",8,S),s("button",{class:"but-apagar",onClick:g=>r.editar(t)},"Editar",8,z)])]))),128))])])])])}var H=k(C,[["render",F]]);export{H as default};
